"use strict";var letterShowTime=100;var sceneLength=10000;var scriptPath="script.json";var prefaceDiv=document.getElementById("preface");var codeWrapper=document.querySelector("#code-side .wrapper");var promptWrapper=document.querySelector("#prompt-side .wrapper");document.addEventListener("DOMContentLoaded",function(){loadJSON(function(response){runScript(JSON.parse(response))})});function loadJSON(callback){var xobj=new XMLHttpRequest;xobj.overrideMimeType("application/json");xobj.open("GET",scriptPath,true);xobj.onreadystatechange=function(){if(xobj.readyState==4&&xobj.status==200){callback(xobj.responseText)}};xobj.send(null)}function runScript(json){var initialDelay=0;var _loop=function _loop(scene){setTimeout(function(){nextScene(scene)},initialDelay);initialDelay+=sceneLength};var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=json.scenes[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var scene=_step.value;_loop(scene)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}}function nextScene(scene){codeWrapper.innerHTML="";prefaceDiv.innerHTML="";promptWrapper.innerHTML="";prefaceDiv.innerHTML=scene.preface;var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=scene.code.split(/\n/)[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var codeLine=_step2.value;var codeSpan=document.createElement("span");codeSpan.textContent=codeLine;codeSpan.setAttribute("class","line");codeWrapper.appendChild(codeSpan)}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=scene.prompt.split(/\n/)[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var promptLine=_step3.value;var promptSpan=document.createElement("span");promptSpan.textContent=promptLine;promptSpan.setAttribute("class","line");promptWrapper.appendChild(promptSpan)}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return()}}finally{if(_didIteratorError3){throw _iteratorError3}}}}function typeCode(){var codeLines=document.getElementsByClassName("code-line");var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=codeLines[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var line=_step4.value;var text=line.textContent;var letters="";for(var i=0;i<text.length;i++){letters+="<span class=\"letter hide\">"+text[i]+"</span>"}line.innerHTML=letters}}catch(err){_didIteratorError4=true;_iteratorError4=err}finally{try{if(!_iteratorNormalCompletion4&&_iterator4.return){_iterator4.return()}}finally{if(_didIteratorError4){throw _iteratorError4}}}var initialDelay=0;var _loop2=function _loop2(_line){setTimeout(function(){showLetters(_line)},initialDelay);initialDelay+=_line.children.length*letterShowTime};var _iteratorNormalCompletion5=true;var _didIteratorError5=false;var _iteratorError5=undefined;try{for(var _iterator5=codeLines[Symbol.iterator](),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=true){var _line=_step5.value;_loop2(_line)}}catch(err){_didIteratorError5=true;_iteratorError5=err}finally{try{if(!_iteratorNormalCompletion5&&_iterator5.return){_iterator5.return()}}finally{if(_didIteratorError5){throw _iteratorError5}}}}function showLetters(line){for(var i=0;i<line.children.length;i++){(function(i){setTimeout(function(){line.children[i].classList.remove("hide")},letterShowTime*i)})(i)};}
